:py:mod:`ocebuild.sources.binary`
=================================

.. py:module:: ocebuild.sources.binary

.. autoapi-nested-parse::

   Binary helper functions.



Module Contents
---------------


Functions
~~~~~~~~~

.. autoapisummary::

   ocebuild.sources.binary.get_binary_ext
   ocebuild.sources.binary.get_digest
   ocebuild.sources.binary.get_stream_digest
   ocebuild.sources.binary.wrap_binary



.. py:function:: get_binary_ext(platform: Literal[Windows, Darwin, Linux] = system()) -> str

   Gets a platform-dependent extension for vendored binaries.


.. py:function:: get_digest(filepath, algorithm=sha256) -> str

   Gets a digest for a file or directory.

   :param filepath: The path to the file or directory.
   :param algorithm: The hashlib algorithm to use. Defaults to SHA256.

   :returns: A hex digest of the file or directory.


.. py:function:: get_stream_digest(stream, algorithm=sha256) -> str

   Gets a digest for a stream.

   :param stream: The stream to read.
   :param algorithm: The hashlib algorithm to use. Defaults to SHA256.

   :returns: A hex digest of the stream.


.. py:function:: wrap_binary(args: List[str], binary_path: str, persist: bool = True) -> str

   Wraps a binary and returns stdout.

   :param args: The arguments to pass to the binary.
   :param binary_path: The path to the binary.
   :param persist: Whether to persist the binary on disk.

   :raises RuntimeError: If the binary returns a non-zero exit code.

   :returns: The stdout of the binary.


